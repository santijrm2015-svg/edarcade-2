<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infinite Craft - Versión Adaptativa</title>
    <style>
        /* --- ESTILOS CSS --- */
        :root {
            --bg-color: #1a1a1a;
            --sidebar-bg: #252525;
            --item-bg: #3a3a3a;
            --item-hover-bg: #4a4a4a;
            --slot-bg: #2a2a2a;
            --text-color: #f0f0f0;
            --accent-color: #4a9eff;
            --success-color: #4eff4a;
            --error-color: #ff4a4a;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        /* Sidebar */
        #sidebar {
            width: 100%;
            background-color: var(--sidebar-bg);
            padding: 15px;
            box-sizing: border-box;
            overflow-y: auto;
            border-bottom: 1px solid #444;
            max-height: 30vh;
        }

        #sidebar h2 {
            margin-top: 0;
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 10px;
        }

        .item {
            background-color: var(--item-bg);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            text-align: center;
            transition: background-color 0.2s, transform 0.1s, border-color 0.2s;
            user-select: none;
            border: 2px solid transparent;
        }

        .item:hover {
            background-color: var(--item-hover-bg);
            transform: scale(1.05);
        }

        .item.selected {
            border-color: var(--accent-color);
            background-color: var(--item-hover-bg);
            box-shadow: 0 0 10px var(--accent-color);
        }

        /* Main Content */
        #main-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-y: auto;
        }

        #game-title {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 0 10px var(--accent-color);
        }

        #stats {
            margin-bottom: 30px;
            font-size: 1.2em;
            color: #aaa;
        }

        #crafting-area {
            display: flex;
            gap: 30px;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .slot {
            width: 150px;
            height: 150px;
            border: 3px dashed #555;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            text-align: center;
            padding: 10px;
            box-sizing: border-box;
            transition: border-color 0.3s, background-color 0.3s;
            word-wrap: break-word;
            cursor: pointer;
        }
        
        .slot:hover {
            background-color: rgba(74, 158, 255, 0.1);
        }

        #plus-sign {
            font-size: 3em;
            color: #666;
        }

        #result-area {
            min-width: 200px;
            min-height: 100px;
            padding: 20px;
            border-radius: 12px;
            background-color: var(--slot-bg);
            text-align: center;
            font-size: 1.8em;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.5s ease;
        }

        #result-area.new-discovery { animation: pulse 0.5s; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); box-shadow: 0 0 25px var(--success-color); } 100% { transform: scale(1); } }
        #result-area.error { color: var(--error-color); }

        #controls { margin-top: 20px; }
        button { background-color: var(--accent-color); color: white; border: none; padding: 10px 20px; border-radius: 8px; font-size: 1em; cursor: pointer; transition: background-color 0.2s; }
        button:hover { background-color: #357ae8; }

        /* --- Media Query para Escritorio --- */
        @media (min-width: 769px) {
            body { flex-direction: row; }
            #sidebar {
                width: 250px;
                height: 100vh;
                max-height: none;
                border-right: 1px solid #444;
                border-bottom: none;
            }
        }
    </style>
</head>
<body>

    <div id="sidebar">
        <h2>Elementos</h2>
        <div id="items-container">
            <!-- Los elementos se generarán aquí con JavaScript -->
        </div>
    </div>

    <div id="main-content">
        <h1 id="game-title">Infinite Craft</h1>
        <div id="stats">Descubiertos: <span id="discovered-count">4</span> / <span id="total-count">4</span></div>
        
        <div id="crafting-area">
            <div id="slot1" class="slot" data-slot="1"></div>
            <div id="plus-sign">+</div>
            <div id="slot2" class="slot" data-slot="2"></div>
        </div>

        <div id="result-area">Toca dos elementos para combinar</div>

        <div id="controls">
            <button id="clear-btn">Limpiar</button>
        </div>
    </div>

    <script>
        // --- LÓGICA JAVASCRIPT ---
        const itemsContainer = document.getElementById('items-container');
        const slot1 = document.getElementById('slot1');
        const slot2 = document.getElementById('slot2');
        const resultArea = document.getElementById('result-area');
        const clearBtn = document.getElementById('clear-btn');
        const discoveredCountEl = document.getElementById('discovered-count');
        const totalCountEl = document.getElementById('total-count');

        let discoveredItems = [];
        const initialItems = ['Agua', 'Tierra', 'Fuego', 'Viento'];
        
        // --- BASE DE DATOS DE RECETAS (COMPLETA) ---
        const recipes = {
            'Agua,Tierra': 'Lodo', 'Agua,Fuego': 'Vapor', 'Agua,Viento': 'Ola', 'Tierra,Fuego': 'Lava', 'Tierra,Viento': 'Polvo', 'Fuego,Viento': 'Humo',
            'Lodo,Planta': 'Pantano', 'Vapor,Aire': 'Nube', 'Nube,Agua': 'Lluvia', 'Lava,Agua': 'Piedra', 'Lava,Tierra': 'Volcán', 'Piedra,Fuego': 'Metal', 'Piedra,Tierra': 'Roca',
            'Metal,Viento': 'Espada', 'Metal,Piedra': 'Herramienta', 'Metal,Electricidad': 'Cable', 'Metal,Agua': 'Óxido', 'Metal,Aire': 'Óxido',
            'Planta,Planta': 'Árbol', 'Planta,Sol': 'Oxígeno', 'Planta,Agua': 'Alga', 'Planta,Hombre': 'Agricultura', 'Planta,Madera': 'Fruta',
            'Árbol,Árbol': 'Bosque', 'Árbol,Herramienta': 'Madera', 'Árbol,Fuego': 'Leña', 'Árbol,Agua': 'Balsa', 'Árbol,Viento': 'Hoja',
            'Madera,Herramienta': 'Rueda', 'Madera,Agua': 'Balsa', 'Madera,Fuego': 'Leña', 'Madera,Madera': 'Casa', 'Madera,Piedra': 'Hacha',
            'Leña,Fuego': 'Campamento', 'Campamento,Persona': 'Historia', 'Campamento,Tierra': 'Asentamiento', 'Campamento,Cielo': 'Estrellas',
            'Pantano,Vida': 'Bacteria', 'Bacteria,Vida': 'Pez', 'Bacteria,Tierra': 'Tierra Fértil', 'Bacteria,Agua': 'Plancton',
            'Pez,Agua': 'Banco de Peces', 'Pez,Herramienta': 'Pesca', 'Pez,Pez': 'Escama', 'Pez,Ave': 'Pingüino',
            'Lluvia,Tierra': 'Barro', 'Lluvia,Planta': 'Crecimiento', 'Lluvia,Frío': 'Nieve', 'Lluvia,Campo': 'Arcoíris',
            'Barro,Vida': 'Humano', 'Barro,Fuego': 'Ladrillo', 'Barro,Piedra': 'Cerámica', 'Barro,Agua': 'Goo',
            'Humano,Madera': 'Herramienta', 'Humano,Leña': 'Fuego', 'Humano,Piedra': 'Casa', 'Humano,Humano': 'Amor', 'Humano,Amor': 'Familia', 'Humano,Familia': 'Tribu',
            'Humano,Fuego': 'Idea', 'Humano,Idea': 'Filosofía', 'Humano,Filosofía': 'Religión', 'Humano,Religión': 'Templo', 'Humano,Templo': 'Sacerdote',
            'Humano,Metal': 'Rueda', 'Rueda,Rueda': 'Coche', 'Rueda,Metal': 'Tren', 'Rueda,Agua': 'Barco', 'Rueda,Aire': 'Avión',
            'Humano,Árbol': 'Conocimiento', 'Conocimiento,Computadora': 'Inteligencia Artificial', 'Conocimiento,Libro': 'Sabiduría',
            'Humano,Barro': 'Cerámica', 'Cerámica,Horno': 'Ladrillo', 'Ladrillo,Ladrillo': 'Muro', 'Muro,Muro': 'Castillo', 'Muro,Casa': 'Ciudad',
            'Humano,Barco': 'Navegación', 'Humano,Coche': 'Tráfico', 'Humano,Avión': 'Piloto',
            'Espada,Humano': 'Guerrero', 'Guerrero,Guerrero': 'Ejército', 'Ejército,Castillo': 'Rey', 'Rey,Reina': 'Familia Real',
            'Humano,Pez': 'Sirena', 'Humano,Caballo': 'Centauro', 'Humano,Ave': 'Ángel',
            'Herramienta,Madera': 'Hacha', 'Hacha,Árbol': 'Leña', 'Hacha,Animal': 'Carne', 'Hacha,Guerra': 'Hacha de Guerra',
            'Herramienta,Piedra': 'Cuchillo', 'Cuchillo,Carne': 'Filete', 'Cuchillo,Guerra': 'Daga',
            'Fuego,Planta': 'Cenizas', 'Cenizas,Vida': 'Fénix', 'Cenizas,Agua': 'Lye',
            'Volcán,Agua': 'Isla', 'Isla,Isla': 'Archipiélago', 'Isla,Humano': 'Náufrago',
            'Agua,Agua': 'Lago', 'Lago,Lago': 'Mar', 'Mar,Tierra': 'Continente', 'Continente,Continente': 'Planeta', 'Planeta,Planeta': 'Sistema Solar',
            'Sistema Solar,Sistema Solar': 'Galaxia', 'Galaxia,Vida': 'Extraterrestre',
            'Metal,Metal': 'Acero', 'Acero,Vapor': 'Motor', 'Motor,Coche': 'Automóvil', 'Motor,Ave': 'Avión',
            'Hielo,Fuego': 'Agua Tibia', 'Hielo,Viento': 'Nieve', 'Nieve,Nieve': 'Nevada', 'Nevada,Árbol': 'Árbol de Navidad',
            'Viento,Viento': 'Tornado', 'Agua,Tornado': 'Tsunami',
            'Sol,Tierra': 'Desierto', 'Desierto,Planta': 'Cactus',
            'Sol,Sol': 'Supernova', 'Luna,Estrella': 'Cielo Nocturno',
            'Electricidad,Metal': 'Imán', 'Electricidad,Agua': 'Oxígeno', 'Electricidad,Aire': 'Ozono', 'Electricidad,Sandía': 'Relámpago',
            'Vida,Tierra': 'Semilla', 'Semilla,Agua': 'Planta', 'Semilla,Tierra': 'Árbol',
            'Vida,Fuego': 'Fénix', 'Vida,Agua': 'Pez', 'Vida,Tierra': 'Humano', 'Vida,Aire': 'Pájaro',
            'Tiempo,Tiempo': 'Reloj', 'Reloj,Energía': 'Tiempo', 'Reloj,Humano': 'Muerte',
            'Amor,Amor': 'Sexo', 'Sexo,Humano': 'Bebé', 'Bebé,Agua': 'Nado', 'Bebé,Libro': 'Estudiante',
            'Familia,Casa': 'Hogar', 'Hogar,Calor': 'Felicidad', 'Hogar,Trabajo': 'Estrés',
            'Dinero,Humano': 'Trabajo', 'Trabajo,Dinero': 'Riqueza', 'Riqueza,Humano': 'Banquero',
            'Arma,Humano': 'Guerrero', 'Guerra,Paz': 'Tregua', 'Guerra,Guerra': 'Destrucción',
            'Música,Humano': 'Canción', 'Canción,Canción': 'Álbum', 'Canción,Palabra': 'Letra',
            'Palabra,Palabra': 'Frase', 'Frase,Frase': 'Párrafo', 'Párrafo,Párrafo': 'Libro',
            'Libro,Libro': 'Biblioteca', 'Biblioteca,Conocimiento': 'Universidad', 'Universidad,Humano': 'Científico',
            'Científico,Idea': 'Descubrimiento', 'Científico,Laboratorio': 'Experimento',
            'Idea,Computadora': 'Software', 'Software,Software': 'Aplicación', 'Software,Humano': 'Usuario',
            'Computadora,Computadora': 'Internet', 'Internet,Conocimiento': 'Wikipedia', 'Internet,Humano': 'Red Social',
            'Red Social,Red Social': 'Comunicación', 'Comunicación,Comunicación': 'Lenguaje',
            'Juego,Juego': 'Deporte', 'Deporte,Humano': 'Atleta', 'Deporte,Bola': 'Pelota',
            'Arte,Arte': 'Estilo', 'Arte,Humano': 'Artista', 'Artista,Pincel': 'Pintura',
            'Pintura,Pared': 'Mural', 'Pintura,Lienzo': 'Cuadro',
            'Comida,Agua': 'Sopa', 'Comida,Fuego': 'Cocina', 'Comida,Planta': 'Verdura', 'Comida,Animal': 'Carne',
            'Carne,Fuego': 'Carne Asada', 'Carne,Planta': 'Hamburguesa',
            'Pan,Queso': 'Sandwich', 'Pan,Tomate': 'Pizza',
            'Leche,Chocolate': 'Chocolate Caliente', 'Leche,Frío': 'Helado',
            'Dulce,Agua': 'Refresco', 'Dulce,Fruta': 'Mermelada',
            'Sal,Agua': 'Agua Salada', 'Sal,Patata': 'Papas Fritas',
            'Huevo,Fuego': 'Huevo Frito', 'Huevo,Agua': 'Huevo Duro',
            'Flor,Árbol': 'Fruta', 'Flor,Flor': 'Ramo', 'Flor,Agua': 'Jardín',
            'Jardín,Jardín': 'Parque', 'Parque,Animales': 'Zoológico',
            'Arena,Agua': 'Playa', 'Playa,Sol': 'Vacaciones',
            'Montaña,Montaña': 'Cordillera', 'Montaña,Nube': 'Cima',
            'Cielo,Tierra': 'Horizonte', 'Cielo,Mar': 'Costa',
            'Noche,Día': 'Ciclo', 'Noche,Estrella': 'Cielo Estrellado', 'Día,Sol': 'Luz',
            'Luz,Oscuridad': 'Sombra', 'Sombra,Humano': 'Fantasma',
            'Frío,Agua': 'Hielo', 'Frío,Frío': 'Frío Absoluto',
            'Calor,Calor': 'Fuego', 'Calor,Agua': 'Vapor',
            'Piedra,Piedra': 'Roca', 'Roca,Roca': 'Montaña',
            'Metal,Metal': 'Oro', 'Oro,Humano': 'Avaricia', 'Oro,Rey': 'Corona',
            'Diamante,Diamante': 'Joyas', 'Joyas,Rey': 'Tesoro',
            'Humano,Muerte': 'Esqueleto', 'Esqueleto,Vida': 'Zombi',
            'Vampiro,Muerte': 'No-muerto', 'Hombre Lobo,Luna': 'Lobo',
            'Mago,Hechizo': 'Magia', 'Magia,Libro': 'Grimorio',
            'Dragón,Fuego': 'Fuego Dragón', 'Dragón,Huevo': 'Cría de Dragón', 'Dragón,Metal': 'Escamas de Dragón',
            'Robot,Vida': 'Androide', 'Androide,Conciencia': 'Ciborg',
            'Espacio,Tiempo': 'Universo', 'Universo,Origen': 'Big Bang',
            'Cero,Cero': 'Nada', 'Nada,Universo': 'Vacío',
            'Dios,Humano': 'Religión', 'Dios,Diablo': 'Dualidad',
            'Bien,Mal': 'Moral', 'Moral,Humano': 'Ética',
            'Verdad,Mentira': 'Paradoja', 'Paradoja,Humano': 'Confusión',
            'Cerebro,Computadora': 'Inteligencia Artificial', 'Cerebro,Conocimiento': 'Mente',
            'Mente,Cuerpo': 'Ser', 'Ser,Tiempo': 'Experiencia',
            'Amistad,Amistad': 'Lealtad', 'Amor,Tristeza': 'Dolor',
            'Paz,Guerra': 'Conflicto', 'Conflicto,Resolución': 'Acuerdo',
            'Ciencia,Naturaleza': 'Biología', 'Biología,Vida': 'Evolución',
            'Química,Agua': 'H2O', 'Física,Energía': 'Trabajo',
            'Historia,Humano': 'Cultura', 'Cultura,Sociedad': 'Civilización',
            'Lenguaje,Escritura': 'Alfabeto', 'Alfabeto,Libro': 'Conocimiento',
            'Música,Ritmo': 'Bailar', 'Bailar,Felicidad': 'Fiesta',
            'Fuego,Madera': 'Cocina', 'Cocina,Comida': 'Receta',
            'Juego,Reglas': 'Deporte', 'Deporte,Competencia': 'Campeonato',
            'Tecnología,Sociedad': 'Futuro', 'Futuro,Pasado': 'Presente',
            'Infinite Craft,Creación': 'Juego Infinito'
        };

        // --- FUNCIONES PRINCIPALES ---
        let selectedItem = null;

        function init() {
            loadGameState();
            renderSidebar();
            setupEventListeners();
            updateStats();
        }

        function loadGameState() {
            const saved = localStorage.getItem('infiniteCraftDiscoveries');
            if (saved) {
                discoveredItems = JSON.parse(saved);
            } else {
                discoveredItems = [...initialItems];
                saveGameState();
            }
        }

        function saveGameState() {
            localStorage.setItem('infiniteCraftDiscoveries', JSON.stringify(discoveredItems));
        }

        function updateStats() {
            discoveredCountEl.textContent = discoveredItems.length;
            // Calculamos el total de elementos únicos (iniciales + resultados de recetas)
            const allItems = new Set([...initialItems, ...Object.values(recipes)]);
            totalCountEl.textContent = allItems.size;
        }

        function renderSidebar() {
            itemsContainer.innerHTML = '';
            discoveredItems.sort().forEach(itemName => {
                const itemEl = document.createElement('div');
                itemEl.className = 'item';
                itemEl.textContent = itemName;
                itemEl.dataset.itemName = itemName;
                itemEl.addEventListener('click', handleItemClick);
                itemsContainer.appendChild(itemEl);
            });
        }

        function setupEventListeners() {
            slot1.addEventListener('click', handleItemClick);
            slot2.addEventListener('click', handleItemClick);
            clearBtn.addEventListener('click', clearCraftingArea);
        }

        function handleItemClick(e) {
            const clickedElement = e.currentTarget;
            const itemName = clickedElement.dataset.itemName || clickedElement.textContent;
            if (!itemName) return;

            if (selectedItem === null) {
                selectedItem = itemName;
                document.querySelectorAll('.item.selected').forEach(el => el.classList.remove('selected'));
                const itemEl = document.querySelector(`.item[data-item-name="${itemName}"]`);
                if(itemEl) itemEl.classList.add('selected');

                if (!slot1.dataset.itemName) {
                    slot1.textContent = itemName; slot1.dataset.itemName = itemName;
                } else if (!slot2.dataset.itemName) {
                    slot2.textContent = itemName; slot2.dataset.itemName = itemName;
                }
            } else {
                const item1 = selectedItem;
                const item2 = itemName;
                if (item1 === item2) {
                    showResult('No puedes combinar un elemento consigo mismo', false);
                } else {
                    checkForCombination(item1, item2);
                }
                clearSelection();
            }
        }
        
        function clearSelection() {
            document.querySelectorAll('.item.selected').forEach(el => el.classList.remove('selected'));
            selectedItem = null;
        }

        function checkForCombination(item1, item2) {
            const key = [item1, item2].sort().join(',');
            const result = recipes[key];

            if (result) {
                showResult(result, true);
                if (!discoveredItems.includes(result)) {
                    discoveredItems.push(result);
                    saveGameState();
                    renderSidebar();
                    updateStats();
                }
            } else {
                showResult('No pasa nada', false);
            }
        }

        function showResult(resultText, isSuccess) {
            resultArea.textContent = resultText;
            resultArea.className = 'new-discovery';
            if (!isSuccess) {
                resultArea.classList.add('error');
            }
            setTimeout(() => { resultArea.classList.remove('new-discovery', 'error'); }, 1500);
        }

        function clearCraftingArea() {
            slot1.textContent = ''; slot1.dataset.itemName = '';
            slot2.textContent = ''; slot2.dataset.itemName = '';
            resultArea.textContent = 'Toca dos elementos para combinar';
            clearSelection();
        }

        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
